"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["77049"],{63782:function(e,s,r){r.d(s,{Z:function(){return t}});var a=r(85893);r(67294);let t=()=>(0,a.jsxs)("section",{className:"loading-banner",children:[(0,a.jsx)("div",{className:"loading-banner-spinner"}),(0,a.jsx)("h2",{className:"loading-banner-heading",children:"Following the damn train..."})]})},33480:function(e,s,r){r.d(s,{Z:function(){return i}});var a=r(85893),t=r(67294);let n=e=>{let{text:s}=e,[r,n]=(0,t.useState)(!1);return(0,a.jsxs)("div",{className:"copy-badge-container",children:[(0,a.jsx)("span",{className:"copy-badge-text",children:s}),(0,a.jsx)("button",{className:`copy-badge-button ${r?"copied":""}`,onClick:()=>{navigator.clipboard.writeText(s),n(!0),setTimeout(()=>n(!1),2e3)},children:r?"COPIED":"COPY"})]})},i=e=>{let{server:s}=e;return(0,a.jsxs)("div",{className:"server-row-card",children:[(0,a.jsxs)("div",{className:"server-header",children:[(0,a.jsx)("a",{href:"/servers/"+s.ip,className:"server-link",children:(0,a.jsx)("h2",{className:"server-heading",children:s.hn})}),(0,a.jsxs)("div",{className:"server-badges",children:[s.pr&&(0,a.jsx)("img",{src:"/images/assets/partners.png",alt:"partner server",title:"Has partnership!",className:"server-badge-image"}),s.omp&&(0,a.jsx)("img",{src:"/images/assets/logo-light-trans.svg",alt:"open.mp server",title:"open.mp server",className:"server-badge-image"})]})]}),(0,a.jsxs)("div",{className:"server-info",children:[(0,a.jsxs)("div",{className:"server-details",children:[(0,a.jsx)("span",{className:"server-game-mode",children:s.gm}),(0,a.jsxs)("div",{className:"server-players",children:[(0,a.jsxs)("div",{className:"server-player-count",children:[(0,a.jsx)("span",{children:s.pc}),"/",(0,a.jsx)("span",{children:s.pm})]}),"players"]})]}),(0,a.jsx)(n,{text:s.ip})]})]})}},48850:function(e,s,r){r.d(s,{C:function(){return l},I:function(){return i}});var a=r(85893),t=r(67294);let n=new class{listeners=[];addListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}emit(e){this.listeners.forEach(s=>s(e))}},i=()=>{let[e,s]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let e=n.addListener(e=>{s(s=>[e,...s]),setTimeout(()=>{s(s=>s.filter(s=>s.id!==e.id))},1e5)});return()=>e()},[]),(0,a.jsx)("div",{className:"toast-container",children:e.map(e=>(0,a.jsxs)("div",{className:`toast ${"success"===e.type?"toast-success":"toast-error"}`,children:[(0,a.jsxs)("div",{className:"toast-header",children:[(0,a.jsx)("h4",{className:"toast-title",children:e.title}),(0,a.jsx)("button",{onClick:()=>s(s=>s.filter(s=>s.id!==e.id)),className:"toast-close","aria-label":"Close toast",children:"\xd7"})]}),(0,a.jsx)("p",{className:"toast-message",children:e.message})]},e.id))})},l=e=>{let{message:s,title:r,type:a="success"}=e,t={id:Math.random().toString(36).substr(2,9),message:s,title:r,type:a};n.emit(t)}},19972:function(e,s,r){r.d(s,{A:function(){return a}});let a="https://api.open.mp"},35222:function(e,s,r){r.r(s),r.d(s,{default:()=>M});var a=r("85893"),t=r("13687"),n=r("74865"),i=r.n(n),l=r("67294"),c=r("18898"),o=r("63782"),d=r("33480"),h=r("48850"),m=r("19972");let v=e=>`${m.A}/servers/${e}`,u=async e=>{try{let s=await fetch(v(e));return await s.json()}catch(e){return}},p=e=>{let{to:s}=e;return(0,a.jsx)("a",{href:s,className:"button server-info-back-link",children:"\u2190 Back to Servers"})},x=e=>{let{address:s}=e;return(0,a.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"server-info-link",children:(0,a.jsxs)("button",{className:"server-info-quick-join-button",children:["Quick Join",(0,a.jsx)("span",{className:"server-info-arrow",children:"\u2192"})]})})},j=e=>{let{data:s}=e;return(0,a.jsx)("article",{className:"server-info-wrapper",children:(0,a.jsx)("div",{className:"server-info-container",children:(0,a.jsxs)("div",{className:"server-info-box",children:[(0,a.jsxs)("div",{className:"server-info-header",children:[(0,a.jsx)("span",{className:"server-info-game-mode",children:s.core.gm}),(0,a.jsx)("a",{href:`samp://${s.dm??s.ip}`,target:"_blank",rel:"noopener noreferrer",className:"server-info-ip-address",children:s.dm??s.ip})]}),(0,a.jsx)("h1",{className:"server-info-name",children:s.core.hn}),(0,a.jsx)("p",{className:"server-info-description",children:s.description||"This server has no description"}),(0,a.jsxs)("div",{className:"row server-info-content-wrapper",children:[(0,a.jsxs)("div",{className:"server-info-stats-section",children:[(0,a.jsxs)("div",{className:"server-info-stat-item",children:[(0,a.jsx)("span",{className:"server-info-stat-label",children:"Players Online"}),(0,a.jsxs)("span",{className:"server-info-stat-value",children:[s.core.pc,"/",s.core.pm]})]}),(0,a.jsxs)("div",{className:"server-info-stat-item",children:[(0,a.jsx)("span",{className:"server-info-stat-label",children:"Mod Version"}),(0,a.jsx)("span",{className:"server-info-stat-value",children:s.core.vn})]}),(0,a.jsxs)("div",{className:"server-info-stat-item",children:[(0,a.jsx)("span",{className:"server-info-stat-label",children:"Language"}),(0,a.jsx)("span",{className:"server-info-stat-value",children:s.core.la})]}),(0,a.jsx)(x,{address:`samp://${s.dm??s.ip}`})]}),s.ru&&(0,a.jsx)("div",{className:"server-info-rules-section",children:(0,a.jsxs)("table",{className:"server-info-rules-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Rule"}),(0,a.jsx)("th",{children:"Value"})]})}),(0,a.jsx)("tbody",{children:Object.entries(s.ru).map(e=>{let[s,r]=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:s}),(0,a.jsx)("td",{children:r})]},s)})})]})})]}),(0,a.jsx)("div",{className:"server-info-divider"}),(0,a.jsx)("div",{className:"server-info-footer",children:(0,a.jsxs)("time",{className:"server-info-last-updated",children:["Last updated"," ",b(new Date(s.lastUpdated),new Date)," ago"]})})]})})})},f=e=>{let{ip:s}=e,[r,t]=(0,l.useState)(!0),[n,i]=(0,l.useState)(void 0);return((0,l.useEffect)(()=>{u(s).then(e=>{t(!1),i(e)})},[]),!n||r)?(0,a.jsx)(o.Z,{}):(0,a.jsx)(j,{data:n})},N=e=>{let{ip:s}=e;return s?(0,a.jsx)(t.Z,{title:s,description:"Server Information for "+s,children:(0,a.jsx)("section",{className:"server-info-section",children:(0,a.jsxs)("div",{className:"server-info-stack",children:[(0,a.jsx)(p,{to:"/servers"}),(0,a.jsx)(f,{ip:s})]})})}):(0,a.jsx)(o.Z,{})},b=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=e instanceof Date?e:new Date(e),a=Math.floor(Math.floor(Math.abs((s instanceof Date?s:new Date(s)).getTime()-r.getTime())/1e3)/60),t=Math.floor(a/60),n=Math.floor(t/24),i=Math.floor(n/30),l=Math.floor(n/365),c=(e,s)=>1===e?`1 ${s}`:`${e} ${s}s`;if(l>0)return c(l,"year");if(i>0)return c(i,"month");if(n>0)return c(n,"day");if(t>0)return c(t,"hour");if(a>0)return c(a,"minute");else return"less than a minute"},g=`${m.A}/servers/`,y=async()=>{try{let e=await fetch(g);return await e.json()}catch(e){return[]}},w=e=>({players:e.map(e=>e.pc).reduce((e,s)=>e+s,0),servers:e.length}),k=(e,s)=>{let r=[...e];if(s.search){let e=s.search.toLowerCase();r=r.filter(s=>s.ip.toLowerCase().includes(e)||s.hn.toLowerCase().includes(e)||s.gm.toLowerCase().includes(e))}return s.showEmpty||(r=r.filter(e=>e.pc>0)),s.showPartnersOnly&&(r=r.filter(e=>!0===e.pr)),s.showOmpOnly&&(r=r.filter(e=>!0===e.omp)),"pc"===s.sort&&r.sort((e,s)=>s.pc-e.pc),r},S=e=>{let{stats:{players:s,servers:r}}=e;return(0,a.jsx)("div",{className:"servers-center",children:(0,a.jsxs)("p",{className:"servers-stats",children:[(0,a.jsx)("strong",{children:s})," players on ",(0,a.jsx)("strong",{children:r})," servers with an average of ",(0,a.jsx)("strong",{children:(s/r).toFixed(1)})," ","players per server."]})})},C=e=>{let{onAdd:s}=e,[r,t]=(0,l.useState)(""),n=async e=>{try{e.preventDefault(),i().start();let a=await fetch(g,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:r})});if(i().inc(),200===a.status){let e=await a.json();s(e),(0,h.C)({message:`${e.core.hn} is added to our pending list. If it's not available after maximum 48 hours, you can contact us on Discord!`,title:"Server Submitted!",type:"success"})}else{let e=await a.json();(0,h.C)({message:`Status ${a.statusText}: ${e?.error}`,title:"Submission failed!",type:"error"})}}catch(e){(0,h.C)({message:"An error occurred while submitting the server",title:"Error",type:"error"})}finally{i().done()}};return(0,a.jsx)("form",{action:g,target:"_self",method:"post",onSubmit:n,className:"servers-form",children:(0,a.jsxs)("div",{className:"servers-input-group",children:[(0,a.jsx)("input",{type:"text",name:"address",placeholder:"IP/Domain",value:r,onChange:e=>t(e.target.value),className:"servers-input"}),(0,a.jsx)("button",{type:"submit",className:"button button--primary button--md2",children:"Add"})]})})},$=e=>{let{isOpen:s,onClose:r,children:t}=e;return s?(0,a.jsxs)("div",{className:"servers-modal-overlay",children:[(0,a.jsx)("div",{className:"servers-modal-backdrop",onClick:r}),(0,a.jsx)("div",{className:"servers-modal-content",children:t})]}):null},D=e=>{let{data:s}=e,[r,t]=(0,l.useState)(""),[n,i]=(0,l.useState)(!0),[o,h]=(0,l.useState)(!1),[m,v]=(0,l.useState)(!1),[u,p]=(0,l.useState)("relevance"),[x,j]=(0,l.useState)(!1),f=(0,l.useMemo)(()=>k(s,{search:r,showEmpty:n,showPartnersOnly:o,showOmpOnly:m,sort:u}),[s,r,n,o,m,u]),N=Math.floor(7.462686567164179);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{className:"servers-list-form",children:[(0,a.jsxs)("div",{className:"servers-controls",children:[(0,a.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"servers-select",children:[(0,a.jsx)("option",{value:"relevance",children:"Relevance"}),(0,a.jsx)("option",{value:"pc",children:"Players"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Search by IP or Name",name:"search",id:"search",value:r,onChange:e=>t(e.target.value),className:"servers-search"}),(0,a.jsx)("button",{type:"button",onClick:()=>j(!0),className:"button button--primary button--md2",children:"Add server"})]}),(0,a.jsxs)("div",{className:"servers-checkboxes",children:[(0,a.jsxs)("label",{className:"servers-checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:e=>i(e.target.checked),className:"servers-checkbox"}),"Show empty servers"]}),(0,a.jsxs)("label",{className:"servers-checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",checked:m,onChange:e=>v(e.target.checked),className:"servers-checkbox"}),"Show only open.mp servers"]}),(0,a.jsxs)("label",{className:"servers-checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",checked:o,onChange:e=>h(e.target.checked),className:"servers-checkbox"}),"Show only partners"]})]})]}),(0,a.jsx)(S,{stats:w(s)}),(0,a.jsx)(c.t7,{height:(f.length+1)*134,width:"100%",itemSize:134,itemCount:f.length,overscanCount:N,children:e=>{let{index:s,style:r}=e,t=f[s];return(0,a.jsx)("div",{style:r,children:(0,a.jsx)(d.Z,{server:t},t.ip)})}}),(0,a.jsxs)($,{isOpen:x,onClose:()=>j(!1),children:[(0,a.jsxs)("div",{className:"servers-modal-header",children:[(0,a.jsx)("h2",{className:"servers-modal-title",children:"Add a server"}),(0,a.jsx)("button",{onClick:()=>j(!1),className:"servers-modal-close",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"servers-modal-body",children:[(0,a.jsx)("label",{className:"servers-label",children:"IP or Domain"}),(0,a.jsx)(C,{onAdd:e=>{j(!1)}}),(0,a.jsxs)("p",{className:"servers-helper-text",children:["IP must be in format ",(0,a.jsx)("strong",{children:"ip:port"})]})]}),(0,a.jsx)("div",{className:"servers-modal-footer",children:(0,a.jsx)("button",{onClick:()=>j(!1),className:"button button--primary button--md2",children:"Close"})})]})]})},M=()=>{if("undefined"!=typeof window&&window.location&&window.location.pathname&&window.location.pathname.includes(":")){let e=window.location.pathname.split("/servers/")[1];return(0,a.jsx)(N,{ip:e})}let[e,s]=(0,l.useState)(!0),[r,n]=(0,l.useState)([]);return(0,l.useEffect)(()=>{y().then(e=>{s(!1),n(e)})},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(t.Z,{title:"Servers",description:"List of San Andreas servers using open.mp or SA-MP",children:(0,a.jsx)("section",{className:"servers-container",children:e?(0,a.jsx)(o.Z,{}):(0,a.jsx)(D,{data:r})})}),(0,a.jsx)(h.I,{})]})}}}]);